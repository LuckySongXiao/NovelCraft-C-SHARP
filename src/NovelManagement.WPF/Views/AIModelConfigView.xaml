<UserControl x:Class="NovelManagement.WPF.Views.AIModelConfigView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1000">
    
    <UserControl.Resources>
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryHueMidBrush}"/>
            <Setter Property="Margin" Value="0,20,0,10"/>
        </Style>
        
        <Style x:Key="ModelCardStyle" TargetType="materialDesign:Card">
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="materialDesign:ShadowAssist.ShadowDepth" Value="Depth2"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- æ ‡é¢˜æ  -->
        <materialDesign:Card Grid.Row="0" Margin="20" Padding="20" materialDesign:ShadowAssist.ShadowDepth="Depth2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="Cog" Width="32" Height="32" 
                                           Foreground="{DynamicResource PrimaryHueMidBrush}" 
                                           VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <StackPanel>
                        <TextBlock Text="AIæ¨¡åž‹é…ç½®" FontSize="24" FontWeight="Bold"/>
                        <TextBlock Text="ä¸ºä¸åŒåŠŸèƒ½é€‰æ‹©æœ€é€‚åˆçš„AIæ¨¡åž‹" 
                                 FontSize="14" Opacity="0.7"/>
                    </StackPanel>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="TestConnectionButton" Content="æµ‹è¯•è¿žæŽ¥" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Margin="5" Click="TestConnection_Click"/>
                    <Button x:Name="SaveConfigButton" Content="ä¿å­˜é…ç½®" 
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Margin="5" Click="SaveConfig_Click"/>
                </StackPanel>
            </Grid>
        </materialDesign:Card>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <ScrollViewer Grid.Row="1" Margin="20,0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- å…¨å±€è®¾ç½® -->
                <TextBlock Text="ðŸŒ å…¨å±€è®¾ç½®" Style="{StaticResource SectionHeaderStyle}"/>
                <materialDesign:Card Style="{StaticResource ModelCardStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Margin="0,0,20,0">
                            <TextBlock Text="é»˜è®¤AIæ¨¡åž‹" FontWeight="Bold" Margin="0,0,0,5"/>
                            <ComboBox x:Name="DefaultModelComboBox" 
                                    materialDesign:HintAssist.Hint="é€‰æ‹©é»˜è®¤æ¨¡åž‹"
                                    Margin="0,0,0,15">
                                <ComboBoxItem Content="DeepSeek-V3"/>
                                <ComboBoxItem Content="GPT-4"/>
                                <ComboBoxItem Content="Claude-3"/>
                                <ComboBoxItem Content="Gemini-Pro"/>
                            </ComboBox>
                            
                            <TextBlock Text="APIå¯†é’¥" FontWeight="Bold" Margin="0,0,0,5"/>
                            <PasswordBox x:Name="ApiKeyPasswordBox" 
                                       materialDesign:HintAssist.Hint="è¾“å…¥APIå¯†é’¥"
                                       Margin="0,0,0,15"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="è¯·æ±‚è¶…æ—¶æ—¶é—´" FontWeight="Bold" Margin="0,0,0,5"/>
                            <Slider x:Name="TimeoutSlider" 
                                  Minimum="10" Maximum="120" Value="30" 
                                  TickFrequency="10" IsSnapToTickEnabled="True"
                                  Margin="0,0,0,5"/>
                            <TextBlock x:Name="TimeoutLabel" Text="30ç§’" 
                                     HorizontalAlignment="Center" FontSize="12" Opacity="0.7"
                                     Margin="0,0,0,15"/>
                            
                            <CheckBox x:Name="EnableCacheCheckBox" Content="å¯ç”¨æ™ºèƒ½ç¼“å­˜" 
                                    IsChecked="True" Margin="0,0,0,10"/>
                            <CheckBox x:Name="EnableLoggingCheckBox" Content="å¯ç”¨è¯¦ç»†æ—¥å¿—" 
                                    IsChecked="False"/>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>

                <!-- åŠŸèƒ½ç‰¹å®šé…ç½® -->
                <TextBlock Text="ðŸŽ¯ åŠŸèƒ½ç‰¹å®šé…ç½®" Style="{StaticResource SectionHeaderStyle}"/>
                
                <!-- å¯¹è¯ç”Ÿæˆ -->
                <materialDesign:Card Style="{StaticResource ModelCardStyle}">
                    <Expander Header="ðŸ’¬ å¯¹è¯ç”Ÿæˆ" IsExpanded="True">
                        <Grid Margin="20,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                <TextBlock Text="æŽ¨èæ¨¡åž‹" FontWeight="Bold" Margin="0,0,0,5"/>
                                <ComboBox x:Name="DialogueModelComboBox" 
                                        materialDesign:HintAssist.Hint="é€‰æ‹©å¯¹è¯ç”Ÿæˆæ¨¡åž‹"
                                        SelectedIndex="0">
                                    <ComboBoxItem Content="DeepSeek-V3 (æŽ¨è)"/>
                                    <ComboBoxItem Content="GPT-4"/>
                                    <ComboBoxItem Content="Claude-3"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                <TextBlock Text="åˆ›é€ æ€§" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Slider x:Name="DialogueCreativitySlider" 
                                      Minimum="0" Maximum="1" Value="0.7" 
                                      TickFrequency="0.1" IsSnapToTickEnabled="True"/>
                                <TextBlock Text="0.7 (å¹³è¡¡)" HorizontalAlignment="Center" FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="æœ€å¤§é•¿åº¦" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Slider x:Name="DialogueMaxLengthSlider" 
                                      Minimum="100" Maximum="2000" Value="800" 
                                      TickFrequency="100" IsSnapToTickEnabled="True"/>
                                <TextBlock Text="800å­—ç¬¦" HorizontalAlignment="Center" FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                        </Grid>
                    </Expander>
                </materialDesign:Card>

                <!-- ä¸–ç•Œè®¾å®šåˆ†æž -->
                <materialDesign:Card Style="{StaticResource ModelCardStyle}">
                    <Expander Header="ðŸŒ ä¸–ç•Œè®¾å®šåˆ†æž" IsExpanded="False">
                        <Grid Margin="20,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                <TextBlock Text="åˆ†æžæ¨¡åž‹" FontWeight="Bold" Margin="0,0,0,5"/>
                                <ComboBox x:Name="AnalysisModelComboBox" 
                                        materialDesign:HintAssist.Hint="é€‰æ‹©åˆ†æžæ¨¡åž‹"
                                        SelectedIndex="1">
                                    <ComboBoxItem Content="DeepSeek-V3"/>
                                    <ComboBoxItem Content="GPT-4 (æŽ¨è)"/>
                                    <ComboBoxItem Content="Claude-3"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                <TextBlock Text="åˆ†æžæ·±åº¦" FontWeight="Bold" Margin="0,0,0,5"/>
                                <ComboBox x:Name="AnalysisDepthComboBox" SelectedIndex="1">
                                    <ComboBoxItem Content="å¿«é€Ÿåˆ†æž"/>
                                    <ComboBoxItem Content="æ ‡å‡†åˆ†æž"/>
                                    <ComboBoxItem Content="æ·±åº¦åˆ†æž"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <CheckBox Content="å¯ç”¨ä¸€è‡´æ€§æ£€æŸ¥" IsChecked="True" Margin="0,0,0,5"/>
                                <CheckBox Content="å¯ç”¨é€»è¾‘éªŒè¯" IsChecked="True" Margin="0,0,0,5"/>
                                <CheckBox Content="ç”Ÿæˆæ”¹è¿›å»ºè®®" IsChecked="True"/>
                            </StackPanel>
                        </Grid>
                    </Expander>
                </materialDesign:Card>

                <!-- åŠ¿åŠ›å…³ç³»åˆ†æž -->
                <materialDesign:Card Style="{StaticResource ModelCardStyle}">
                    <Expander Header="âš”ï¸ åŠ¿åŠ›å…³ç³»åˆ†æž" IsExpanded="False">
                        <Grid Margin="20,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                <TextBlock Text="å…³ç³»åˆ†æžæ¨¡åž‹" FontWeight="Bold" Margin="0,0,0,5"/>
                                <ComboBox x:Name="FactionModelComboBox" 
                                        materialDesign:HintAssist.Hint="é€‰æ‹©å…³ç³»åˆ†æžæ¨¡åž‹"
                                        SelectedIndex="0">
                                    <ComboBoxItem Content="Claude-3 (æŽ¨è)"/>
                                    <ComboBoxItem Content="GPT-4"/>
                                    <ComboBoxItem Content="DeepSeek-V3"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                <TextBlock Text="é¢„æµ‹èŒƒå›´" FontWeight="Bold" Margin="0,0,0,5"/>
                                <ComboBox x:Name="PredictionRangeComboBox" SelectedIndex="1">
                                    <ComboBoxItem Content="çŸ­æœŸ (1-3ç« )"/>
                                    <ComboBoxItem Content="ä¸­æœŸ (3-10ç« )"/>
                                    <ComboBoxItem Content="é•¿æœŸ (10+ç« )"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <CheckBox Content="å†²çªé¢„æµ‹" IsChecked="True" Margin="0,0,0,5"/>
                                <CheckBox Content="è”ç›Ÿåˆ†æž" IsChecked="True" Margin="0,0,0,5"/>
                                <CheckBox Content="æƒåŠ›å¹³è¡¡" IsChecked="False"/>
                            </StackPanel>
                        </Grid>
                    </Expander>
                </materialDesign:Card>

                <!-- æ€§èƒ½ç›‘æŽ§ -->
                <TextBlock Text="ðŸ“Š æ€§èƒ½ç›‘æŽ§" Style="{StaticResource SectionHeaderStyle}"/>
                <materialDesign:Card Style="{StaticResource ModelCardStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- å“åº”æ—¶é—´ -->
                        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                            <TextBlock Text="å¹³å‡å“åº”æ—¶é—´" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <materialDesign:Card Background="{DynamicResource PrimaryHueMidBrush}" 
                                               Width="80" Height="80" Margin="0,10">
                                <TextBlock x:Name="ResponseTimeText" Text="2.3s" 
                                         Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                         Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </materialDesign:Card>
                        </StackPanel>
                        
                        <!-- æˆåŠŸçŽ‡ -->
                        <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                            <TextBlock Text="æˆåŠŸçŽ‡" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <materialDesign:Card Background="{DynamicResource SecondaryHueMidBrush}" 
                                               Width="80" Height="80" Margin="0,10">
                                <TextBlock x:Name="SuccessRateText" Text="98.5%" 
                                         Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                         Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </materialDesign:Card>
                        </StackPanel>
                        
                        <!-- ç¼“å­˜å‘½ä¸­çŽ‡ -->
                        <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                            <TextBlock Text="ç¼“å­˜å‘½ä¸­çŽ‡" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <materialDesign:Card Background="#4CAF50" 
                                               Width="80" Height="80" Margin="0,10">
                                <TextBlock x:Name="CacheHitRateText" Text="76%" 
                                         Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                         Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </materialDesign:Card>
                        </StackPanel>
                        
                        <!-- ä»Šæ—¥è¯·æ±‚æ•° -->
                        <StackPanel Grid.Column="3" HorizontalAlignment="Center">
                            <TextBlock Text="ä»Šæ—¥è¯·æ±‚æ•°" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <materialDesign:Card Background="#FF9800" 
                                               Width="80" Height="80" Margin="0,10">
                                <TextBlock x:Name="TodayRequestsText" Text="142" 
                                         Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                         Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </materialDesign:Card>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>
            </StackPanel>
        </ScrollViewer>

        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <materialDesign:Card Grid.Row="2" Margin="20" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="CheckCircle" Foreground="Green" 
                                           Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBlock x:Name="StatusText" Text="é…ç½®å·²ä¿å­˜ï¼Œæ‰€æœ‰æ¨¡åž‹è¿žæŽ¥æ­£å¸¸" VerticalAlignment="Center"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="é‡ç½®é»˜è®¤" Style="{StaticResource MaterialDesignOutlinedButton}" 
                            Margin="5,0" Click="ResetDefaults_Click"/>
                    <Button Content="å¯¼å‡ºé…ç½®" Style="{StaticResource MaterialDesignOutlinedButton}" 
                            Margin="5,0" Click="ExportConfig_Click"/>
                    <Button Content="å¯¼å…¥é…ç½®" Style="{StaticResource MaterialDesignOutlinedButton}" 
                            Margin="5,0" Click="ImportConfig_Click"/>
                </StackPanel>
            </Grid>
        </materialDesign:Card>
    </Grid>
</UserControl>
