<Window x:Class="NovelManagement.WPF.Services.AnalysisResultDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="AIåˆ†æžç»“æžœ" 
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        Style="{StaticResource MaterialDesignWindow}">
    
    <Window.Resources>
        <Style x:Key="ScoreTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,15,0,10"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryHueMidBrush}"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- æ ‡é¢˜æ  -->
        <materialDesign:Card Grid.Row="0" Margin="20,20,20,10" Padding="20">
            <StackPanel>
                <TextBlock x:Name="SettingNameTextBlock" 
                           Text="è®¾å®šåç§°"
                           Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="AIæ™ºèƒ½åˆ†æžæŠ¥å‘Š" 
                           Style="{StaticResource MaterialDesignBody2TextBlock}"
                           HorizontalAlignment="Center"
                           Opacity="0.7"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </materialDesign:Card>
        
        <!-- ä¸»è¦å†…å®¹ -->
        <ScrollViewer Grid.Row="1" Margin="20,0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- è¯„åˆ†å¡ç‰‡ -->
                <materialDesign:Card Margin="0,10" Padding="20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- æ€»ä½“è¯„åˆ† -->
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="æ€»ä½“è¯„åˆ†" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <materialDesign:Card Background="{DynamicResource PrimaryHueMidBrush}" 
                                               Width="60" Height="60" Margin="0,10">
                                <TextBlock x:Name="OverallScoreText" 
                                         Text="8.5"
                                         Style="{StaticResource ScoreTextStyle}"
                                         Foreground="White"/>
                            </materialDesign:Card>
                        </StackPanel>
                        
                        <!-- ä¸€è‡´æ€§è¯„åˆ† -->
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="ä¸€è‡´æ€§" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <materialDesign:Card Background="{DynamicResource SecondaryHueMidBrush}" 
                                               Width="60" Height="60" Margin="0,10">
                                <TextBlock x:Name="ConsistencyScoreText" 
                                         Text="8.0"
                                         Style="{StaticResource ScoreTextStyle}"
                                         Foreground="White"/>
                            </materialDesign:Card>
                        </StackPanel>
                        
                        <!-- å®Œæ•´æ€§è¯„åˆ† -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="å®Œæ•´æ€§" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <materialDesign:Card Background="{DynamicResource SecondaryHueMidBrush}" 
                                               Width="60" Height="60" Margin="0,10">
                                <TextBlock x:Name="CompletenessScoreText" 
                                         Text="9.0"
                                         Style="{StaticResource ScoreTextStyle}"
                                         Foreground="White"/>
                            </materialDesign:Card>
                        </StackPanel>
                        
                        <!-- é€»è¾‘æ€§è¯„åˆ† -->
                        <StackPanel Grid.Column="3">
                            <TextBlock Text="é€»è¾‘æ€§" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <materialDesign:Card Background="{DynamicResource SecondaryHueMidBrush}" 
                                               Width="60" Height="60" Margin="0,10">
                                <TextBlock x:Name="LogicalScoreText" 
                                         Text="8.5"
                                         Style="{StaticResource ScoreTextStyle}"
                                         Foreground="White"/>
                            </materialDesign:Card>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>
                
                <!-- è¯¦ç»†åˆ†æž -->
                <materialDesign:Card Margin="0,10" Padding="20">
                    <StackPanel>
                        <!-- ä¼˜åŠ¿ -->
                        <TextBlock Text="âœ… ä¼˜åŠ¿" Style="{StaticResource SectionHeaderStyle}"/>
                        <ItemsControl x:Name="StrengthsList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="0,2">
                                        <materialDesign:PackIcon Kind="CheckCircle" 
                                                               Foreground="Green" 
                                                               Width="16" Height="16" 
                                                               VerticalAlignment="Center" 
                                                               Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- åŠ£åŠ¿ -->
                        <TextBlock Text="âš ï¸ éœ€è¦æ”¹è¿›" Style="{StaticResource SectionHeaderStyle}"/>
                        <ItemsControl x:Name="WeaknessesList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="0,2">
                                        <materialDesign:PackIcon Kind="AlertCircle" 
                                                               Foreground="Orange" 
                                                               Width="16" Height="16" 
                                                               VerticalAlignment="Center" 
                                                               Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- å»ºè®® -->
                        <TextBlock Text="ðŸ’¡ æ”¹è¿›å»ºè®®" Style="{StaticResource SectionHeaderStyle}"/>
                        <ItemsControl x:Name="SuggestionsList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="0,2">
                                        <materialDesign:PackIcon Kind="Lightbulb" 
                                                               Foreground="{DynamicResource PrimaryHueMidBrush}" 
                                                               Width="16" Height="16" 
                                                               VerticalAlignment="Center" 
                                                               Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- å†²çª -->
                        <TextBlock x:Name="ConflictsHeader" Text="ðŸ”¥ å‘çŽ°çš„å†²çª" Style="{StaticResource SectionHeaderStyle}" Visibility="Collapsed"/>
                        <ItemsControl x:Name="ConflictsList" Visibility="Collapsed">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="0,2">
                                        <materialDesign:PackIcon Kind="Fire" 
                                                               Foreground="Red" 
                                                               Width="16" Height="16" 
                                                               VerticalAlignment="Center" 
                                                               Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- ç¼ºå¤±å…ƒç´  -->
                        <TextBlock x:Name="MissingHeader" Text="ðŸ“ ç¼ºå¤±çš„å…ƒç´ " Style="{StaticResource SectionHeaderStyle}" Visibility="Collapsed"/>
                        <ItemsControl x:Name="MissingElementsList" Visibility="Collapsed">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="0,2">
                                        <materialDesign:PackIcon Kind="FileDocumentMinus" 
                                                               Foreground="Gray" 
                                                               Width="16" Height="16" 
                                                               VerticalAlignment="Center" 
                                                               Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </materialDesign:Card>
                
                <!-- åˆ†æžæ—¶é—´ -->
                <TextBlock x:Name="AnalysisTimeText" 
                           Text="åˆ†æžæ—¶é—´: 2024-12-19 15:30:00"
                           Style="{StaticResource MaterialDesignCaptionTextBlock}"
                           HorizontalAlignment="Center"
                           Opacity="0.6"
                           Margin="0,10"/>
            </StackPanel>
        </ScrollViewer>
        
        <!-- åº•éƒ¨æŒ‰é’® -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20">
            <Button Content="å¯¼å‡ºæŠ¥å‘Š" 
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Margin="10" 
                    Click="ExportReport_Click"/>
            <Button Content="å…³é—­" 
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Margin="10" 
                    Click="Close_Click"/>
        </StackPanel>
    </Grid>
</Window>
